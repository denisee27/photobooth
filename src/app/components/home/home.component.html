<div *ngIf="!showPreview && !showPleaseWait" style="display: flex; gap: 20px; align-items: center; justify-content: center; height: 100vh; position: relative;">
    <div style="display: flex; flex-direction: column; align-items: center; position: relative;">
        <webcam [trigger]="trigger$" (imageCapture)="handleImage($event)" (initError)="handleInitError($event)"></webcam>

        <!-- Countdown Timer -->
        <div *ngIf="countdown > 0" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: rgba(128, 128, 128, 0.7); color: white; font-size: 30px; font-weight: bold; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
            {{ countdown }}
        </div>

        <!-- Start Button -->
        <button (click)="startCapture()" style="margin-top: 10px; padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 5px;">
            Start
        </button>
    </div>

    <!-- Image Previews -->
    <div [ngStyle]="{'display': 'flex', 'flex-direction': layout === 'vertical' ? 'column' : 'row', 'flex-wrap': layout === 'grid' ? 'wrap' : 'nowrap', 'gap': '10px'}">
        <img *ngFor="let imgObj of images; let i = index" [src]="imgObj.img.imageAsDataUrl" [style.opacity]="imgObj.show ? '1' : '0'" [style.transition]="'opacity 0.5s ease-in-out'" [style.background]="imgObj.bgColor" style="width: 150px; border: 2px solid #000; display: block; margin-top: 5px; padding: 10px;" />
    </div>
</div>



<!-- Please Wait Message -->
<div *ngIf="showPleaseWait" style="display: flex; align-items: center; justify-content: center; height: 100vh; font-size: 24px; font-weight: bold; color: #333;">
    Please Wait...
</div>

<!-- Full Preview dengan satu background -->
<div *ngIf="showPreview" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;">
    <h2 style="color: #333;">Photo Preview</h2>

    <!-- Container dengan satu background -->
    <div [ngStyle]="{'background': previewBgColor, 'padding': '20px', 'border': '3px solid #000'}" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; width: 400px;">

        <img *ngFor="let imgObj of images" [src]="imgObj.img.imageAsDataUrl" style="width: 100%; height: auto; border: 2px solid #000; padding: 10px;" />
    </div>

    <!-- Opsi Warna Background Preview -->
    <div style="margin-top: 20px; display: flex; gap: 10px;">
        <button *ngFor="let color of availableColors" (click)="changePreviewBgColor(color)" [style.background]="color" style="width: 40px; height: 40px; border: none; cursor: pointer;">
        </button>
    </div>
</div>